#include "pul.h"

Boton::Boton(uint8_t pin) 
    : pin(pin), lastPressTime(0), indiceOnda(0) {}

void Boton::iniciar() {
    pinMode(pin, INPUT_PULLUP);
}

bool Boton::fuePresionado() {
    if (digitalRead(pin) == LOW && (millis() - lastPressTime > 200)) {
        lastPressTime = millis();
        indiceOnda = (indiceOnda + 1) % 4;  // Cicla entre 0 y 3 (4 ondas)
        return true;
    }
    return false;
}

int Boton::getOndaActual() const {
    return indiceOnda;
}

const char* Boton::getDescripcionOnda() const {
    const char* ondas[] = {
        // Senoidal
        "ğŸŸ¦ SENOIDAL\n"
        "  â•­â”³â•®\n"
        " â”â•¯â”—â”»â•¯â”",

        // Cuadrada
        "ğŸŸ¥ CUADRADA\n"
        " â”â”â”³â”³â”â”\n"
        "   â”—â”»  ",

        // Sierra
        "ğŸŸ¨ SIERRA\n"
        " â•±â•±â•±â•±\n"
        "â•±â•±â•±â•±  ",

        // Triangular
        "ğŸŸ© TRIANGULAR\n"
        "  â•±â•²â•±â•²\n"
        " â•±â•²â•±â•²  "
    };
    return ondas[indiceOnda];
}
